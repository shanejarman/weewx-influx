# WEEWX CONFIGURATION FILE for InfluxDB Testing
#
# This is a modified version of the standard weewx.conf
# configured to use the simulator driver and InfluxDB backend

##############################################################################

# This section is for general configuration information.

# Set to 1 for extra debug info, otherwise comment it out or set to zero.
debug = 1

# Whether to log successful operations
log_success = True

# Whether to log unsuccessful operations
log_failure = True

##############################################################################

#   This section is for information about the station.

[Station]
    
    # Description of the station location
    location = WeeWX InfluxDB Test
    
    # Latitude and longitude for reports
    latitude = 0.0
    longitude = 0.0
    
    # Altitude of the station
    altitude = 0, foot
    
    # Set to use the simulator driver
    station_type = Simulator
    
    # Rain year start month
    rain_year_start = 1
    
    # Start of week (0=Monday, 6=Sunday)
    week_start = 6

##############################################################################

[Simulator]
    # This section is for the weewx weather station simulator
    
    # The time (in seconds) between LOOP packets
    loop_interval = 2.5
    
    # Use simulator mode (real-time simulation with sleep between packets)
    mode = simulator
    
    # The driver to use
    driver = weewx.drivers.simulator

##############################################################################

#   This section is for configuring the archive service

[StdArchive]
    
    # Archive interval in seconds (5 minutes)
    archive_interval = 300
    
    # Generate archive records in software
    record_generation = software
    
    # Include LOOP data in hi/low statistics
    loop_hilo = True
    
    # The data binding used to save archive records
    data_binding = wx_binding

##############################################################################

#   This section binds a data store to a database

[DataBindings]
    
    [[wx_binding]]
        # Use our InfluxDB database
        database = influx_archive
        # The measurement name in InfluxDB
        table_name = archive
        # The manager handles aggregation of data for historical summaries
        manager = weewx.manager.DaySummaryManager
        # The schema defines the structure of the database
        schema = schemas.wview.schema

##############################################################################

#   This section defines various databases

[Databases]
    
    # InfluxDB configuration
    [[influx_archive]]
        database_type = InfluxDB
        host = localhost
        port = 8086
        org = weewx
        token = aXwGB3kJzQgfRD9f1ibYcsmGbmj-9DExYoK_rbbqf2yS5DgbRTNR-kHC8SPOzr9Blfs5rrAMIOsvFMvOl0dA_A==
        bucket = weather_data
        driver = weedb.influx

##############################################################################

#   This section defines defaults for the different types of databases

[DatabaseTypes]
    
    # Defaults for SQLite databases
    [[SQLite]]
        driver = weedb.sqlite
        SQLITE_ROOT = archive
    
    # Defaults for MySQL databases
    [[MySQL]]
        driver = weedb.mysql
        host = localhost
        user = weewx
        password = weewx
    
    # Defaults for InfluxDB databases
    [[InfluxDB]]
        driver = weedb.influx
        host = localhost
        port = 8086

##############################################################################

#   This section configures the internal weewx engine

[Engine]
    
    # This section specifies which services should be run and in what order
    [[Services]]
        prep_services = weewx.engine.StdTimeSynch
        data_services = ,
        process_services = weewx.engine.StdConvert, weewx.engine.StdCalibrate, weewx.engine.StdQC, weewx.wxservices.StdWXCalculate
        xtype_services = weewx.wxxtypes.StdWXXTypes, weewx.wxxtypes.StdPressureCooker, weewx.wxxtypes.StdRainRater, weewx.wxxtypes.StdDelta
        archive_services = weewx.engine.StdArchive
        restful_services = 
        report_services = weewx.engine.StdPrint